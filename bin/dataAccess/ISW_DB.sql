
DROP TABLE HOSPITAL_BASED IF EXISTS;
DROP TABLE PRIVATE IF EXISTS;
DROP TABLE SYMPTOM IF EXISTS;
DROP TABLE SUPPORTS IF EXISTS;
DROP TABLE EMERGENCY_CALL IF EXISTS;
DROP TABLE AMBULANCE IF EXISTS;
DROP TABLE PATIENT IF EXISTS;
DROP TABLE SPECIALITY IF EXISTS;
DROP TABLE HOSPITAL IF EXISTS;

CREATE TABLE HOSPITAL (
       NAME CHAR(100) NOT NULL
     , ADDRESS CHAR(1000) NOT NULL
     , LATITUDE DOUBLE NOT NULL
     , LONGITUDE DOUBLE NOT NULL
     , PRIMARY KEY (NAME)
);

CREATE TABLE SPECIALITY (
       NAME CHAR(100) NOT NULL
     , PRIMARY KEY (NAME)
);

CREATE TABLE PATIENT (
       DNI CHAR(9) NOT NULL
     , NAME CHAR(100) NOT NULL
     , SURNAME CHAR(100) NOT NULL
     , ADDRESS CHAR(1000) NOT NULL
     , PHONE_NUMBER CHAR(20) NOT NULL
     , AGE INT NOT NULL
     , GENDER CHAR(1) NOT NULL
     , PRIMARY KEY (DNI)
);

CREATE TABLE AMBULANCE (
       REGISTRATION_NUMBER CHAR(9) NOT NULL
     , EQUIPMENT_TYPE CHAR(100) NOT NULL
     , LATITUDE DOUBLE NOT NULL
     , LONGITUDE DOUBLE NOT NULL
     , PRIMARY KEY (REGISTRATION_NUMBER)
);

CREATE TABLE EMERGENCY_CALL (
       ID CHAR(9) NOT NULL
     , LATITUDE DOUBLE NOT NULL
     , LONGITUDE DOUBLE NOT NULL
     , DATE DATE
     , TIME TIME
     , DNIPATIENT CHAR(9) NOT NULL
     , IDAMBULANCE CHAR(9) NOT NULL
     , IDHOSPITAL CHAR(100) NOT NULL
     , PRIMARY KEY (ID)
     , CONSTRAINT FK_EMERGENCY_CALL_1 FOREIGN KEY (DNIPATIENT)
                  REFERENCES PATIENT (DNI)
     , CONSTRAINT FK_EMERGENCY_CALL_2 FOREIGN KEY (IDAMBULANCE)
                  REFERENCES AMBULANCE (REGISTRATION_NUMBER)
     , CONSTRAINT FK_EMERGENCY_CALL_3 FOREIGN KEY (IDHOSPITAL)
                  REFERENCES HOSPITAL (NAME)
);

CREATE TABLE SUPPORTS (
       IDSPECIALITY CHAR(100) NOT NULL
     , IDHOSPITAL CHAR(100) NOT NULL
     , PRIMARY KEY (IDSPECIALITY, IDHOSPITAL)
     , CONSTRAINT FK_SUPPORTS_1 FOREIGN KEY (IDSPECIALITY)
                  REFERENCES SPECIALITY (NAME)
     , CONSTRAINT FK_SUPPORTS_2 FOREIGN KEY (IDHOSPITAL)
                  REFERENCES HOSPITAL (NAME)
);

CREATE TABLE SYMPTOM (
       IDSPECIALITY CHAR(100) NOT NULL
     , ID CHAR(9) NOT NULL
     , STAGE_GRAVITY INT NOT NULL
     , DURATION DOUBLE NOT NULL
     , DESCRIPTION CHAR(1000) NOT NULL
     , PRIMARY KEY (IDSPECIALITY, ID)
     , CONSTRAINT FK_SYMPTOM_1 FOREIGN KEY (IDSPECIALITY)
                  REFERENCES SPECIALITY (NAME)
     , CONSTRAINT FK_SYMPTOM_2 FOREIGN KEY (ID)
                  REFERENCES EMERGENCY_CALL (ID)
);

CREATE TABLE PRIVATE (
       REGISTRATION_NUMBER CHAR(9) NOT NULL
     , COMPANY_NAME CHAR(100) NOT NULL
     , PRIMARY KEY (REGISTRATION_NUMBER)
     , CONSTRAINT FK_PRIVATE_1 FOREIGN KEY (REGISTRATION_NUMBER)
                  REFERENCES AMBULANCE (REGISTRATION_NUMBER)
);

CREATE TABLE HOSPITAL_BASED (
       REGISTRATION_NUMBER CHAR(9) NOT NULL
     , IDHOSPITAL CHAR(100) NOT NULL
     , PRIMARY KEY (REGISTRATION_NUMBER)
     , CONSTRAINT FK_HOSPITAL_BASED_1 FOREIGN KEY (REGISTRATION_NUMBER)
                  REFERENCES AMBULANCE (REGISTRATION_NUMBER)
     , CONSTRAINT FK_HOSPITAL_BASED_2 FOREIGN KEY (IDHOSPITAL)
                  REFERENCES HOSPITAL (NAME)
);

